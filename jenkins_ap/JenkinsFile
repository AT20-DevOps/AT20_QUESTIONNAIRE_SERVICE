pipeline {
  agent any
  stages {
    stage('Test') {
      agent { docker 'node:18-alpine3.16' }
      steps {
        sh 'npm install'
        sh 'npm test'
      }
      post{
          always{
            archiveArtifacts artifacts: 'tests/test-results/report.xml', followSymlinks: false 
          }
        }
    }
    stage('Package'){
      steps{
        sh 'docker build -t questionnaire-service ../.'
      }
    }
    stage('Publish'){
      //steps{
        //docker login 
        //sh 'echo  docker tag nombreservicio mas el mio'
        //sh 'echo docker push nombreservicio'
      //}
    }
  }
}
